(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{539:function(t,e,n){"use strict";var r=n(545);e.a=function(){for(var t,e=r.c;t=e.sourceEvent;)e=t;return e}},540:function(t,e,n){"use strict";e.a=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}},555:function(t,e,n){var r=n(556);"string"==typeof r&&(r=[[t.i,r,""]]);n(45)(r,{});r.locals&&(t.exports=r.locals)},556:function(t,e,n){(t.exports=n(44)(!1)).push([t.i,'\n/* Variables - keep in sync with globalStyles.js*/\n:root {\n  --darkGrey: #333;\n  --medGrey: #888;\n}\n\n#d3entropy .overlay {\n  fill: none;\n  pointer-events: all;\n}\n\n#d3entropy .brush {\n  stroke: none;\n}\n\n#d3entropy .niceText {\n  font-family: "Lato", "Helvetica Neue", "Helvetica", "sans-serif";\n  font-size: 14px;\n  font-style: italic;\n  color: var(--medGrey);\n}\n\n.brush .selection {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n',""])},557:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return p}));var r=Array.prototype.slice,i=function(t){return t};function o(t){return"translate("+(t+.5)+",0)"}function a(t){return"translate(0,"+(t+.5)+")"}function c(t){return function(e){return+t(e)}}function s(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function l(){return!this.__axis}function u(t,e){var n=[],u=null,f=null,p=6,y=6,h=3,d=1===t||4===t?-1:1,v=4===t||2===t?"x":"y",g=1===t||3===t?o:a;function m(r){var o=null==u?e.ticks?e.ticks.apply(e,n):e.domain():u,a=null==f?e.tickFormat?e.tickFormat.apply(e,n):i:f,m=Math.max(p,0)+h,b=e.range(),x=+b[0]+.5,j=+b[b.length-1]+.5,O=(e.bandwidth?s:c)(e.copy()),k=r.selection?r.selection():r,w=k.selectAll(".domain").data([null]),S=k.selectAll(".tick").data(o,e).order(),A=S.exit(),R=S.enter().append("g").attr("class","tick"),P=S.select("line"),Y=S.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(R),P=P.merge(R.append("line").attr("stroke","currentColor").attr(v+"2",d*p)),Y=Y.merge(R.append("text").attr("fill","currentColor").attr(v,d*m).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),r!==k&&(w=w.transition(r),S=S.transition(r),P=P.transition(r),Y=Y.transition(r),A=A.transition(r).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=O(t))?g(t):this.getAttribute("transform")})),R.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return g(e&&isFinite(e=e(t))?e:O(t))}))),A.remove(),w.attr("d",4===t||2==t?y?"M"+d*y+","+x+"H0.5V"+j+"H"+d*y:"M0.5,"+x+"V"+j:y?"M"+x+","+d*y+"V0.5H"+j+"V"+d*y:"M"+x+",0.5H"+j),S.attr("opacity",1).attr("transform",(function(t){return g(O(t))})),P.attr(v+"2",d*p),Y.attr(v,d*m).text(a),k.filter(l).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),k.each((function(){this.__axis=O}))}return m.scale=function(t){return arguments.length?(e=t,m):e},m.ticks=function(){return n=r.call(arguments),m},m.tickArguments=function(t){return arguments.length?(n=null==t?[]:r.call(t),m):n.slice()},m.tickValues=function(t){return arguments.length?(u=null==t?null:r.call(t),m):u&&u.slice()},m.tickFormat=function(t){return arguments.length?(f=t,m):f},m.tickSize=function(t){return arguments.length?(p=y=+t,m):p},m.tickSizeInner=function(t){return arguments.length?(p=+t,m):p},m.tickSizeOuter=function(t){return arguments.length?(y=+t,m):y},m.tickPadding=function(t){return arguments.length?(h=+t,m):h},m}function f(t){return u(3,t)}function p(t){return u(4,t)}},751:function(t,e,n){"use strict";var r=n(539),i=n(540);e.a=function(t){var e=Object(r.a)();return e.changedTouches&&(e=e.changedTouches[0]),Object(i.a)(t,e)}},764:function(t,e,n){"use strict";n.r(e);var r=n(24),i=n.n(r),o=n(58),a=n.n(o),c=n(59),s=n.n(c),l=n(82),u=n.n(l),f=n(83),p=n.n(f),y=n(52),h=n.n(y),d=n(3),v=n.n(d),g=n(758),m=n(757),b=(n(525),n(43)),x=n(527),j=n(18),O=n.n(j),k=n(751),w=n(30),S=n(557),A=n(16),R=n(759),P=n(553),Y=n(587),G=n(696),E=n(586),F=n(519),q=n(588),z=n.n(q),M=n(522),V=n(100),D=n(35),T=n(7),_=n(561),B=function(t,e){if(e&&e[t])return e[t].title;if(Object(D.d)(t)){var n=Object(D.a)(t);return n.aa?"Genotype at ".concat(n.gene," pos ").concat(n.positions.join(", ")):"Genotype at Nuc. ".concat(n.positions.join(", "))}return t},C=function(t,e){return{y:Object(w.a)().domain([0,e]).range([t.height-t.spaceBottom,t.spaceTop]),numTicksY:5}},H=function(t,e,n){!function(t){t.selectAll(".y.axis").remove()}(t);var r=Object(F.a)(".0%");t.append("g").attr("class","y axis").attr("transform","translate(".concat(e.spaceLeft,",0)")).style("font-family",M.b).style("font-size","12px").call(Object(S.b)(n.y).ticks(n.numTicksY).tickFormat(r))},L=function(t,e,n,r){if(n){!function(t){t.selectAll(".projection-pivot").remove(),t.selectAll(".projection-text").remove()}(t),t.append("g").attr("class","projection-pivot").append("line").attr("x1",e.x(parseFloat(n))).attr("x2",e.x(parseFloat(n))).attr("y1",e.y(1)).attr("y2",e.y(0)).style("visibility","visible").style("stroke","rgba(55,55,55,0.9)").style("stroke-width","2").style("stroke-dasharray","4 4");var i=.5*(e.x(parseFloat(n))+e.x.range()[1]);t.append("g").attr("class","projection-text").append("text").attr("x",i).attr("y",e.y(1)-3).style("pointer-events","none").style("fill","#555").style("font-family",M.b).style("font-size",12).style("alignment-baseline","bottom").style("text-anchor","middle").text(r("Projection"))}};function X(){Object(m.a)(this).attr("opacity",1)}function N(){Object(m.a)(this).attr("opacity",.85),Object(m.a)("#freqinfo").style("visibility","hidden"),Object(m.a)("#vline").style("visibility","hidden")}var I,J=function(t){var e=t.matrix,n=t.pivots,r=t.colorScale,i=function(t,e){for(var n=e.legendValues.filter((function(t){return void 0!==t})).reverse().map((function(t){return t.toString()})),r=n.length-1;r>=0;--r)-1===t.indexOf(n[r])&&n.splice(r,1);return t.length>n.length&&t.forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n}(Object.keys(e),r),o=function(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<e;a++)if(0===i)o.push([0,n[t[i]][a]]);else{var c=r[i-1][a][1];o.push([c,n[t[i]][a]+c])}r.push(o)}return r}(i,n.length,e),a=function(t){return t[t.length-1].reduce((function(t,e){return Math.max(t,e[1])}),0)}(o);return{categories:i,series:o,maxY:a}},U=function(t,e,n,r){var i,o=n.categories,a=n.series,c=r.colorBy,s=r.colorScale,l=r.colorOptions,u=r.pivots,f=r.projection_pivot,p=r.t;(i=t).selectAll("path").remove(),i.selectAll("line").remove(),i.selectAll("text").remove();var y=function(t,e){return function(n,r){return t[r]===V.c?"rgb(190, 190, 190)":Object(A.g)(e.scale(t[r])).toString()}}(o,s),h=function(t,e){return e.continuous?t.map((function(t){return t===V.c?V.c:"".concat(e.legendBounds[t][0].toFixed(2)," - ").concat(e.legendBounds[t][1].toFixed(2))})):t.slice()}(o,s),d=function(){var t=E.a,e=null,n=Object(P.a)(0),r=E.b,i=Object(P.a)(!0),o=null,a=Y.a,c=null;function s(s){var l,u,f,p,y,h=s.length,d=!1,v=new Array(h),g=new Array(h);for(null==o&&(c=a(y=Object(R.a)())),l=0;l<=h;++l){if(!(l<h&&i(p=s[l],l,s))===d)if(d=!d)u=l,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),f=l-1;f>=u;--f)c.point(v[f],g[f]);c.lineEnd(),c.areaEnd()}d&&(v[l]=+t(p,l,s),g[l]=+n(p,l,s),c.point(e?+e(p,l,s):v[l],r?+r(p,l,s):g[l]))}if(y)return c=null,y+""||null}function l(){return Object(G.a)().defined(i).curve(a).context(o)}return s.x=function(n){return arguments.length?(t="function"==typeof n?n:Object(P.a)(+n),e=null,s):t},s.x0=function(e){return arguments.length?(t="function"==typeof e?e:Object(P.a)(+e),s):t},s.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:Object(P.a)(+t),s):e},s.y=function(t){return arguments.length?(n="function"==typeof t?t:Object(P.a)(+t),r=null,s):n},s.y0=function(t){return arguments.length?(n="function"==typeof t?t:Object(P.a)(+t),s):n},s.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Object(P.a)(+t),s):r},s.lineX0=s.lineY0=function(){return l().x(t).y(n)},s.lineY1=function(){return l().x(t).y(r)},s.lineX1=function(){return l().x(e).y(n)},s.defined=function(t){return arguments.length?(i="function"==typeof t?t:Object(P.a)(!!t),s):i},s.curve=function(t){return arguments.length?(a=t,null!=o&&(c=a(o)),s):a},s.context=function(t){return arguments.length?(null==t?o=c=null:c=a(o=t),s):o},s}().x((function(t,n){return e.x(u[n])})).y0((function(t){return e.y(t[0])})).y1((function(t){return e.y(t[1])}));t.selectAll(".stream").data(a).enter().append("path").attr("d",d).attr("fill",y).attr("opacity",.85).on("mouseover",X).on("mouseout",N).on("mousemove",(function(t,n){var r=Object(k.a)(this),i=O()(r,1)[0],o=e.x.invert(i),a=u.reduce((function(t,e,n,r){return Math.abs(e-o)<Math.abs(r[t]-o)?n:t}),0),s=Math.round(100*(t[a][1]-t[a][0]))+"%",y=e.x(u[a]),d=e.y(t[a][1]),v=e.y(t[a][0]);Object(m.a)("#vline").style("visibility","visible").attr("x1",y).attr("x2",y).attr("y1",d).attr("y2",v);var g=y>.5*e.x.range()[1]?"":"".concat(y+25,"px"),b=y>.5*e.x.range()[1]?"".concat(e.x.range()[1]-y+25,"px"):"",x=d>.5*e.y(0)?"".concat(e.y(0)-50,"px"):"".concat(d+25,"px"),j=p("Frequency");f&&u[a]>f&&(j=p("Projected frequency")),Object(m.a)("#freqinfo").style("left",g).style("right",b).style("top",x).style("padding-left","10px").style("padding-right","10px").style("padding-top","0px").style("padding-bottom","0px").style("visibility","visible").style("background-color","rgba(55,55,55,0.9)").style("color","white").style("font-family",M.b).style("font-size",18).style("line-height",1).style("font-weight",300).html("<p>".concat(B(c,l),": ").concat(h[n],"</p>\n        <p>").concat(p("Time point"),": ").concat(Object(T.d)(u[a]),"</p>\n        <p>").concat(j,": ").concat(s,"</p>"))})),t.append("line").attr("id","vline").style("visibility","hidden").style("pointer-events","none").style("stroke","rgba(55,55,55,0.9)").style("stroke-width",4),function(t,e,n,r,i){var o=function(t,e,n,r){return t.map((function(t){for(var i=.15*n.y.domain()[1],o=0;o<t.length-r;o++){var a=o+r;if(t[o][1]-t[o][0]>i&&t[a][1]-t[a][0]>i)return[n.x(e[o+1]),(n.y((t[o][1]+t[o][0])/2)+n.y((t[a][1]+t[a][0])/2))/2]}return[void 0,void 0]}))}(e,n,i,3);t.selectAll(".streamLabels").data(r).enter().append("text").attr("x",(function(t,e){return o[e][0]})).attr("y",(function(t,e){return o[e][1]})).style("pointer-events","none").style("fill","white").style("font-family",M.b).style("font-size",14).style("alignment-baseline","middle").text((function(t,e){return o[e][0]?t:""}))}(t,a,u,h,e)};n(555);function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var Z=Object(b.b)((function(t){return{data:t.frequencies.data,pivots:t.frequencies.pivots,matrix:t.frequencies.matrix,projection_pivot:t.frequencies.projection_pivot,version:t.frequencies.version,browserDimensions:t.browserDimensions.browserDimensions,colorBy:t.controls.colorBy,colorScale:t.controls.colorScale,colorOptions:t.metadata.colorings}}))(I=function(t){u()(n,t);var e=Q(n);function n(t){var r;return a()(this,n),(r=e.call(this,t)).state={maxY:0},r}return s()(n,[{key:"calcChartGeom",value:function(t,e){return{width:t,height:e,spaceLeft:40,spaceRight:10,spaceBottom:20,spaceTop:10}}},{key:"recomputeRedrawAll",value:function(t,e){var n=this.calcChartGeom(e.width,e.height),r=J(K({},e));t.maxY=r.maxY,t.categories=r.categories;var i=function(t,e){return{x:Object(w.a)().domain([e[0],e[e.length-1]]).range([t.spaceLeft,t.width-t.spaceRight])}}(n,e.pivots),o=C(n,r.maxY);t.scales=K(K({},i),o),function(t,e,n){var r=n.x.domain(),i=n.x.range(),o=Object(_.b)(r[1]-r[0],i[1]-i[0]).majorStep;!function(t){t.selectAll(".x.axis").remove()}(t),t.append("g").attr("class","x axis").attr("transform","translate(0,".concat(e.height-e.spaceBottom,")")).style("font-family",M.b).style("font-size","12px").call(Object(S.a)(n.x).tickValues(z()(r[0],r[1],o)).tickFormat((function(t){return Object(_.c)(o,t)})))}(t.svg,n,i),H(t.svg,n,o),U(t.svgStreamGroup,t.scales,r,K({},e)),L(t.svg,t.scales,e.projection_pivot,e.t)}},{key:"recomputeRedrawPartial",value:function(t,e,n){var r,i,o=J(K({},n)),a=t.maxY!==o.maxY,c=(r=t.categories,i=o.categories,!(r.length===i.length&&!r.filter((function(t,e){return t!==i[e]})).length));if(!a&&!c)return!1;var s,l=this.calcChartGeom(n.width,n.height);if(a){var u=C(l,o.maxY);H(t.svg,l,u),s=K(K({},t.scales),u)}else s=K({},t.scales);return U(t.svgStreamGroup,s,o,K({},n)),a&&L(t.svg,s,n.projection_pivot,n.t),K(K({},t),{},{scales:s,maxY:o.maxY,categories:o.categories})}},{key:"componentDidMount",value:function(){var t=Object(m.a)(this.domRef),e=t.append("g"),n={svg:t,svgStreamGroup:e};this.props.matrix&&this.recomputeRedrawAll(n,this.props),this.setState(n)}},{key:"componentWillReceiveProps",value:function(t){if(this.props.version===t.version);else if(!this.props.loaded&&t.loaded){var e=K({},this.state);this.recomputeRedrawAll(e,t),this.setState(e)}else{var n=this.recomputeRedrawPartial(this.state,this.props,t);n&&this.setState(n)}}},{key:"componentDidUpdate",value:function(t){if(t.width!==this.props.width||t.height!==this.props.height){var e=K({},this.state);this.recomputeRedrawAll(e,this.props),this.setState(e)}}},{key:"render",value:function(){var t=this,e=this.props.t;return v.a.createElement(x.a,{title:"".concat(e("Frequencies")," (").concat(e("colored by")," ").concat(B(this.props.colorBy,this.props.colorOptions),")")},v.a.createElement("div",{id:"freqinfo",style:{zIndex:20,position:"absolute",borderRadius:"5px",padding:"10px",backgroundColor:"hsla(0,0%,100%,.9)",pointerEvents:"none",visibility:"hidden",fontSize:"14px"}}),v.a.createElement("svg",{id:"d3frequenciesSVG",width:this.props.width,height:this.props.height,style:{pointerEvents:"auto",overflow:"visible"}},v.a.createElement("g",{ref:function(e){t.domRef=e},id:"d3frequencies"})))}}]),n}(v.a.Component))||I,$=Object(g.a)()(Z);e.default=$}}]);
//# sourceMappingURL=auspice.chunk.5.bundle.js.map